---
layout: post
title: APUE第八章解释器文件小记
tags: [linux, apue]
---

看完这一节， 感觉有点晕， 上下不对接的感觉， 毕竟是分成了两天来看？

但是仔细道来， 只要记住一句话就可以理解解释其文件的工作原理：

* 内核使调用exec函数的进程实际执行的并不是该解释器文件，而是该解释器文件第一行中pathname所制定的文件。

这是什么意思呢？ 就是说即便你执行的是`awk_fake myarg1 myarg2`

其中 awk_fake 在`$PATH`中（或者./awk_fake执行但必须要有可执行权限）中且内容为：


```bash
#! /bin/awk -f
...
```

那么实际上的参数就是这样的：


```bash
argv[0]: /bin/awk
argv[1]: -f
argv[2]: /绝对路径到你的/awk_fake
argv[3]: myarg1
argv[5]: myarg2
```

理解了么？ 也就是说不管是什么名字， 执行进程第一个参数就是解释器文件中#！后的那个绝对路径， 第二可是其后跟的参数， 在之后是文件绝对路径， 然后跟运行文件时命令行参数， 就是这样 ;P

###解释器的好处：

参见书本Page199.

##参考资料:
* UNIX环境高级编程
* [cnblogs一博文](http://www.cnblogs.com/beacer/archive/2012/09/16/2687659.html) （其实这篇博文就是读书笔记， 就是从书上几乎原摘的)
